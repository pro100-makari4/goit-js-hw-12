{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/scroll-functions.js","../src/img/error-icon.png","../src/img/caution-icon.png","../src/js/render-functions.js","../src/js/nightmode.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42558168-62173c93aab0d4cbf34bb4fab';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function getImages(query, page = 1) {\n  try {\n    let response = await axios.get(\n      `${baseUrl}?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n\n    if (!response.data.hits) {\n      throw new Error('Network response was not ok');\n    }\n\n    return response.data;\n  } catch (error) {\n    alert.error;\n  }\n}\n","const goTopButton = document.querySelector('.go-top-btn');\n\ngoTopButton.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n\n\nexport function scrollToNewImages() {\n  const galleryItemHeight = getGalleryItemHeight();\n\n  let currentScrollPosition = window.scrollY;\n  window.scrollTo({\n    top: currentScrollPosition + galleryItemHeight,\n  });\n}\n\nfunction getGalleryItemHeight() {\n  const rect = document.querySelector('.gallery-item').getBoundingClientRect();\n  const windowWidthInPx = window.innerWidth;\n\n  if (windowWidthInPx <= 500) {\n    return rect['height'] * 2 - 48;\n  } else {\n    return rect['height'] * 2;\n  }\n}\n","export default \"__VITE_ASSET__9f8e6185__\"","export default \"__VITE_ASSET__9a2b04a6__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { getImages } from '/js/pixabay-api.js';\nimport { scrollToNewImages } from '/js/scroll-functions.js';\nimport errorIcon from '/img/error-icon.png';\nimport cautionIcon from '/img/caution-icon.png';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\nconst SIMPLY_LIGHTBOX = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 150,\n  captionsPosition: 'bottom',\n});\n\nlet page;\nlet images;\nlet inputValue = null;\n\nform.addEventListener('submit', searchPhotos);\nloadMoreBtn.addEventListener('click', loadNewPhotos);\n\nasync function searchPhotos(event) {\n  event.preventDefault();\n  beforeSearchEvents();\n\n  try {\n    const data = await getImages(inputValue, 1);\n    images = data.hits;\n\n    if (images.length === 0) {\n      messageImagesDidNotFound();\n    } else {\n      renderImages(images, gallery);\n    }\n  } catch {\n    messageImagesDidNotFound();\n  } finally {\n    if (images.length === 0) {\n      loadMoreBtn.classList.add('is-hidden');\n      loader.classList.add('is-hidden');\n    } else {\n      finallyUpdate();\n      form.reset();\n    }\n  }\n}\n\nasync function loadNewPhotos() {\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  let endReached = false;\n\n  try {\n    const data = await getImages(inputValue, ++page);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      endReached = true;\n      messageImagesDidNotFound(endReached);\n    } else {\n      renderImages(images, gallery);\n      scrollToNewImages();\n    }\n  } catch {\n    messageImagesDidNotFound();\n  } finally {\n    if (endReached) {\n      loadMoreBtn.classList.add('is-hidden');\n      loader.classList.add('is-hidden');\n    } else {\n      finallyUpdate();\n    }\n  }\n}\n\nfunction beforeSearchEvents() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  inputValue = input.value;\n  page = 1;\n}\n\nfunction messageImagesDidNotFound(endReached = false) {\n  const errorMessage = endReached\n    ? `Were sorry, but you've reached the end of search results.`\n    : 'Sorry, there are no images matching your search query. Please try again!';\n\n  const icon = endReached ? cautionIcon : errorIcon;\n\n  iziToast.error({\n    message: errorMessage,\n    position: 'topRight',\n    timeout: 5000,\n    progressBar: true,\n    close: true,\n    iconUrl: icon,\n    messageColor: endReached ? '#000' : '#fafafb',\n    iconColor: endReached ? '#000' : '#fafafb',\n    backgroundColor: endReached ? '#90C2DE' : '#FF544B',\n  });\n}\n\nfunction finallyUpdate() {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction renderImages(images, galleryElement) {\n  const galleryHTML = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n\n          <ul class=\"gallery-info-list\">\n            <li class=\"gallery-info-list-item\"><h4>Likes</h4><p>${likes}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Views</h4><p>${views}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Comments</h4><p>${comments}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Downloads</h4><p>${downloads}</p></li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', galleryHTML);\n  SIMPLY_LIGHTBOX.refresh();\n}\n","const checkbox = document.querySelector('input[type=\"checkbox\"]');\n\ncheckbox.addEventListener('change', function () {\n  if (this.checked) {\n    document.body.style.backgroundColor = '#2C2C2F';\n  } else {\n    document.body.style.backgroundColor = '#fbfbfb';\n  }\n});\n"],"names":["KEY","baseUrl","getImages","query","page","response","axios","goTopButton","scrollToNewImages","galleryItemHeight","getGalleryItemHeight","currentScrollPosition","rect","errorIcon","cautionIcon","form","input","gallery","loadMoreBtn","loader","SIMPLY_LIGHTBOX","SimpleLightbox","images","inputValue","searchPhotos","loadNewPhotos","event","beforeSearchEvents","messageImagesDidNotFound","renderImages","finallyUpdate","endReached","errorMessage","icon","iziToast","galleryElement","galleryHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","checkbox"],"mappings":"owBAEA,MAAMA,EAAM,qCACNC,EAAU,2BAET,eAAeC,EAAUC,EAAOC,EAAO,EAAG,CAC/C,GAAI,CACF,IAAIC,EAAW,MAAMC,EAAM,IACzB,GAAGL,CAAO,QAAQD,CAAG,MAAMG,CAAK,6EAA6EC,CAAI,EACvH,EAEI,GAAI,CAACC,EAAS,KAAK,KACjB,MAAM,IAAI,MAAM,6BAA6B,EAG/C,OAAOA,EAAS,IACjB,MAAe,CAEf,CACH,CCnBA,MAAME,EAAc,SAAS,cAAc,aAAa,EAExDA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,OAAO,SAAS,CACd,IAAK,EACL,SAAU,QACd,CAAG,CACH,CAAC,EAIM,SAASC,GAAoB,CAClC,MAAMC,EAAoBC,IAE1B,IAAIC,EAAwB,OAAO,QACnC,OAAO,SAAS,CACd,IAAKA,EAAwBF,CACjC,CAAG,CACH,CAEA,SAASC,GAAuB,CAC9B,MAAME,EAAO,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAG1E,OAFwB,OAAO,YAER,IACdA,EAAK,OAAY,EAAI,GAErBA,EAAK,OAAY,CAE5B,CC7BA,MAAeC,EAAA,gDCAAC,EAAA,kDCQTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAkB,IAAIC,EAAe,aAAc,CACvD,aAAc,MACd,aAAc,IACd,iBAAkB,QACpB,CAAC,EAED,IAAIjB,EACAkB,EACAC,EAAa,KAEjBR,EAAK,iBAAiB,SAAUS,CAAY,EAC5CN,EAAY,iBAAiB,QAASO,CAAa,EAEnD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBC,IAEA,GAAI,CAEFL,GADa,MAAMpB,EAAUqB,EAAY,CAAC,GAC5B,KAEVD,EAAO,SAAW,EACpBM,IAEAC,EAAaP,EAAQL,CAAO,CAElC,MAAU,CACNW,GACJ,QAAY,CACJN,EAAO,SAAW,GACpBJ,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,IAAI,WAAW,IAEhCW,IACAf,EAAK,MAAK,EAEb,CACH,CAEA,eAAeU,GAAgB,CAC7BP,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,OAAO,WAAW,EAEnC,IAAIY,EAAa,GAEjB,GAAI,CAEF,MAAMT,GADO,MAAMpB,EAAUqB,EAAY,EAAEnB,CAAI,GAC3B,KAEhBkB,EAAO,SAAW,GACpBS,EAAa,GACbH,EAAyBG,CAAU,IAEnCF,EAAaP,EAAQL,CAAO,EAC5BT,IAEN,MAAU,CACNoB,GACJ,QAAY,CACJG,GACFb,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,IAAI,WAAW,GAEhCW,GAEH,CACH,CAEA,SAASH,GAAqB,CAC5BV,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,OAAO,WAAW,EAEnCI,EAAaP,EAAM,MACnBZ,EAAO,CACT,CAEA,SAASwB,EAAyBG,EAAa,GAAO,CACpD,MAAMC,EAAeD,EACjB,4DACA,2EAEEE,EAAOF,EAAajB,EAAcD,EAExCqB,EAAS,MAAM,CACb,QAASF,EACT,SAAU,WACV,QAAS,IACT,YAAa,GACb,MAAO,GACP,QAASC,EACT,aAAcF,EAAa,OAAS,UACpC,UAAWA,EAAa,OAAS,UACjC,gBAAiBA,EAAa,UAAY,SAC9C,CAAG,CACH,CAEA,SAASD,GAAgB,CACvBX,EAAO,UAAU,IAAI,WAAW,EAChCD,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASW,EAAaP,EAAQa,EAAgB,CAC5C,MAAMC,EAAcd,EACjB,IACC,CAAC,CACC,aAAAe,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,0CACkCL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,kEAINC,CAAK;AAAA,kEACLC,CAAK;AAAA,qEACFC,CAAQ;AAAA,sEACPC,CAAS;AAAA;AAAA,cAG1E,EACA,KAAK,EAAE,EAEVR,EAAe,mBAAmB,YAAaC,CAAW,EAC1DhB,EAAgB,QAAO,CACzB,CChJA,MAAMwB,EAAW,SAAS,cAAc,wBAAwB,EAEhEA,EAAS,iBAAiB,SAAU,UAAY,CAC1C,KAAK,QACP,SAAS,KAAK,MAAM,gBAAkB,UAEtC,SAAS,KAAK,MAAM,gBAAkB,SAE1C,CAAC"}