{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/scroll-functions.js","../src/img/error-icon.png","../src/img/caution-icon.png","../src/js/render-functions.js","../src/js/nightmode.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42558168-62173c93aab0d4cbf34bb4fab';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function getImages(query, page = 1) {\n  try {\n    let response = await axios.get(\n      `${baseUrl}?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n\n    if (!response.data.hits) {\n      throw new Error('Network response was not ok');\n    }\n\n    return response.data;\n  } catch (error) {\n    alert.error;\n  }\n}\n","const goTopButton = document.querySelector('.go-top-btn');\n\ngoTopButton.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n  });\n});\n\nexport function scrollToNewImages() {\n  window.scrollTo({\n    top: window.scrollY + window.innerHeight * 0.9,\n  });\n}\n","export default \"__VITE_ASSET__9f8e6185__\"","export default \"__VITE_ASSET__9a2b04a6__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { getImages } from '/js/pixabay-api.js';\nimport { scrollToNewImages } from '/js/scroll-functions.js';\nimport errorIcon from '/img/error-icon.png';\nimport cautionIcon from '/img/caution-icon.png';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\nconst goTopBtn = document.querySelector('.go-top-btn');\nconst SIMPLY_LIGHTBOX = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 150,\n  captionsPosition: 'bottom',\n});\n\nlet page;\nlet images;\nlet inputValue = null;\n\nform.addEventListener('submit', searchPhotos);\nloadMoreBtn.addEventListener('click', loadNewPhotos);\n\nasync function searchPhotos(event) {\n  event.preventDefault();\n  beforeSearchEvents();\n\n  try {\n    const data = await getImages(inputValue, 1);\n    images = data.hits;\n\n    if (images.length === 0) {\n      messageImagesDidNotFound();\n    } else {\n      renderImages(images, gallery);\n    }\n  } catch {\n    messageImagesDidNotFound();\n  } finally {\n    if (images.length === 0) {\n      loadMoreBtn.classList.add('is-hidden');\n      loader.classList.add('is-hidden');\n      goTopBtn.classList.add('is-hidden');\n    } else {\n      finallyUpdate();\n      form.reset();\n      goTopBtn.classList.remove('is-hidden');\n    }\n  }\n}\n\nasync function loadNewPhotos() {\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  let endReached = false;\n\n  try {\n    const data = await getImages(inputValue, ++page);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      endReached = true;\n      messageImagesDidNotFound(endReached);\n    } else {\n      renderImages(images, gallery);\n    }\n  } catch {\n    messageImagesDidNotFound();\n  } finally {\n    if (endReached) {\n      loadMoreBtn.classList.add('is-hidden');\n      loader.classList.add('is-hidden');\n    } else {\n      finallyUpdate();\n      scrollToNewImages();\n    }\n  }\n}\n\nfunction beforeSearchEvents() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  inputValue = input.value;\n  page = 1;\n}\n\nfunction messageImagesDidNotFound(endReached = false) {\n  const errorMessage = endReached\n    ? `Were sorry, but you've reached the end of search results.`\n    : 'Sorry, there are no images matching your search query. Please try again!';\n\n  const icon = endReached ? cautionIcon : errorIcon;\n\n  iziToast.error({\n    message: errorMessage,\n    position: 'topRight',\n    timeout: 5000,\n    progressBar: true,\n    close: true,\n    iconUrl: icon,\n    messageColor: endReached ? '#000' : '#fafafb',\n    iconColor: endReached ? '#000' : '#fafafb',\n    backgroundColor: endReached ? '#90C2DE' : '#FF544B',\n  });\n}\n\nfunction finallyUpdate() {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction renderImages(images, galleryElement) {\n  const galleryHTML = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n\n          <ul class=\"gallery-info-list\">\n            <li class=\"gallery-info-list-item\"><h4>Likes</h4><p>${likes}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Views</h4><p>${views}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Comments</h4><p>${comments}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Downloads</h4><p>${downloads}</p></li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', galleryHTML);\n  SIMPLY_LIGHTBOX.refresh();\n}\n","const checkbox = document.querySelector('input[type=\"checkbox\"]');\n\ncheckbox.addEventListener('change', function () {\n  if (this.checked) {\n    document.body.style.backgroundColor = '#2C2C2F';\n    document.body.style.color = '#fbfbfb';\n  } else {\n    document.body.style.backgroundColor = '#fbfbfb';\n    document.body.style.color = '#2e2f42';\n  }\n});\n"],"names":["KEY","baseUrl","getImages","query","page","response","axios","goTopButton","scrollToNewImages","errorIcon","cautionIcon","form","input","gallery","loadMoreBtn","loader","goTopBtn","SIMPLY_LIGHTBOX","SimpleLightbox","images","inputValue","searchPhotos","loadNewPhotos","event","beforeSearchEvents","messageImagesDidNotFound","renderImages","finallyUpdate","endReached","errorMessage","icon","iziToast","galleryElement","galleryHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","checkbox"],"mappings":"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"}