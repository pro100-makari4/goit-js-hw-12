{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error-icon.png","../src/img/caution-icon.png","../src/js/render-functions.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42558168-62173c93aab0d4cbf34bb4fab';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function getImages(query, page) {\n  try {\n    let response = await axios.get(\n      `${baseUrl}?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n\n    if (!response.data.hits) {\n      throw new Error('Network response was not ok');\n    }\n\n    return response.data;\n  } catch (error) {\n    alert.error;\n  }\n}\n","export default \"__VITE_ASSET__9f8e6185__\"","export default \"__VITE_ASSET__9a2b04a6__\"","// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n// import iziToast from 'izitoast';\n// import { getImages } from '/js/pixabay-api.js';\n// import errorIcon from '/img/error-icon.png';\n// import cautionIcon from '/img/caution-icon.png';\n\n// const form = document.querySelector('.form');\n// const input = document.querySelector('.search-input');\n// const gallery = document.querySelector('.gallery');\n// const loadMoreBtn = document.querySelector('.load-more-button');\n// const loader = document.querySelector('.loader');\n\n// const SIMPLY_LIGHTBOX = new SimpleLightbox('.gallery a', {\n//   captionsData: 'alt',\n//   captionDelay: 150,\n//   captionsPosition: 'bottom',\n// });\n\n// let inputValue = null;\n// let page = 1;\n\n// form.addEventListener('submit', searchPhotos);\n// loadMoreBtn.addEventListener('click', loadNewPhotos);\n\n// function searchPhotos(event) {\n//   event.preventDefault();\n//   gallery.innerHTML = '';\n//   loadMoreBtn.classList.add('is-hidden');\n//   loader.classList.remove('is-hidden');\n\n//   inputValue = input.value;\n\n//   getImages(inputValue, 1)\n//     .then(data => {\n//       const images = data.hits;\n\n//       if (images.length === 0) {\n//         throw new Error();\n//       }\n\n//       renderImages(images, gallery);\n//       SIMPLY_LIGHTBOX.refresh();\n//     })\n//     .catch(() => {\n//       gallery.innerHTML = '';\n\n//       iziToast.error({\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//         timeout: 5000,\n//         progressBar: true,\n//         close: true,\n//         iconUrl: errorIcon,\n//         messageColor: '#fafafb',\n//         iconColor: '#fafafb',\n//         backgroundColor: '#FF544B',\n//       });\n//     })\n//     .finally(() => {\n//       loader.classList.add('is-hidden');\n//       loadMoreBtn.classList.remove('is-hidden');\n//       form.reset();\n//     });\n// }\n\n// function loadNewPhotos() {\n//   loadMoreBtn.classList.add('is-hidden');\n//   loader.classList.remove('is-hidden');\n\n//   page++;\n\n//   getImages(inputValue, page)\n//     .then(data => {\n//       const images = data.hits;\n\n//       if (images.length === 0) {\n//         throw new Error();\n//       }\n\n//       renderImages(images, gallery);\n//       SIMPLY_LIGHTBOX.refresh();\n//     })\n//     .catch(() => {\n//       iziToast.error({\n//         message: `Were sorry, but you've reached the end of search results.`,\n//         position: 'topRight',\n//         timeout: 5000,\n//         progressBar: true,\n//         close: true,\n//         iconUrl: cautionIcon,\n//         messageColor: '#000',\n//         iconColor: '#000',\n//         backgroundColor: '#90C2DE',\n//       });\n//       loadMoreBtn.classList.add('is-hidden');\n//     })\n//     .finally(() => {\n//       loader.classList.add('is-hidden');\n//       loadMoreBtn.classList.remove('is-hidden');\n//       form.reset();\n//     });\n// }\n\n// function renderImages(images, galleryElement) {\n//   const galleryHTML = images\n//     .map(\n//       ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads,\n//       }) =>\n//         `<li class=\"gallery-item\">\n//           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//             <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n//           </a>\n\n//           <ul class=\"gallery-info-list\">\n//             <li class=\"gallery-info-list-item\"><h4>Likes</h4><p>${likes}</p></li>\n//             <li class=\"gallery-info-list-item\"><h4>Views</h4><p>${views}</p></li>\n//             <li class=\"gallery-info-list-item\"><h4>Comments</h4><p>${comments}</p></li>\n//             <li class=\"gallery-info-list-item\"><h4>Downloads</h4><p>${downloads}</p></li>\n//           </ul>\n//         </li>`\n//     )\n//     .join('');\n\n//   galleryElement.insertAdjacentHTML('beforeend', galleryHTML);\n// }\n\n\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { getImages } from '/js/pixabay-api.js';\nimport errorIcon from '/img/error-icon.png';\nimport cautionIcon from '/img/caution-icon.png';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\n\nconst SIMPLY_LIGHTBOX = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 150,\n  captionsPosition: 'bottom',\n});\n\nlet inputValue = null;\nlet page = 1;\n\nform.addEventListener('submit', searchPhotos);\nloadMoreBtn.addEventListener('click', loadNewPhotos);\n\nasync function searchPhotos(event) {\n  event.preventDefault();\n  handleSearchEvents();\n\n  try {\n    const data = await getImages(inputValue, 1);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      handleNoImagesFound();\n    } else {\n      renderImages(images, gallery);\n      SIMPLY_LIGHTBOX.refresh();\n    }\n  } catch (error) {\n    handleNoImagesFound();\n  } finally {\n    handleFinally();\n  }\n}\n\nasync function loadNewPhotos() {\n  handleLoadNewPhotosEvents();\n\n  try {\n    const data = await getImages(inputValue, page);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      handleNoImagesFound(true);\n    } else {\n      renderImages(images, gallery);\n      SIMPLY_LIGHTBOX.refresh();\n    }\n  } catch (error) {\n    handleNoImagesFound();\n  } finally {\n    handleFinally();\n  }\n}\n\nfunction handleSearchEvents() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  inputValue = input.value;\n}\n\nfunction handleNoImagesFound(endReached = false) {\n  gallery.innerHTML = '';\n\n  const errorMessage = endReached ? `Were sorry, but you've reached the end of search results.` : \n    'Sorry, there are no images matching your search query. Please try again!';\n\n  const icon = endReached ? cautionIcon : errorIcon;\n\n  iziToast.error({\n    message: errorMessage,\n    position: 'topRight',\n    timeout: 5000,\n    progressBar: true,\n    close: true,\n    iconUrl: icon,\n    messageColor: endReached ? '#000' : '#fafafb',\n    iconColor: endReached ? '#000' : '#fafafb',\n    backgroundColor: endReached ? '#90C2DE' : '#FF544B',\n  });\n}\n\nfunction handleLoadNewPhotosEvents() {\n  loadMoreBtn.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  page++;\n}\n\nfunction handleFinally() {\n  loader.classList.add('is-hidden');\n  loadMoreBtn.classList.remove('is-hidden');\n  form.reset();\n}\n\nfunction renderImages(images, galleryElement) {\n  const galleryHTML = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n\n          <ul class=\"gallery-info-list\">\n            <li class=\"gallery-info-list-item\"><h4>Likes</h4><p>${likes}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Views</h4><p>${views}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Comments</h4><p>${comments}</p></li>\n            <li class=\"gallery-info-list-item\"><h4>Downloads</h4><p>${downloads}</p></li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', galleryHTML);\n}"],"names":["KEY","baseUrl","getImages","query","page","response","axios","errorIcon","cautionIcon","form","input","gallery","loadMoreBtn","loader","SIMPLY_LIGHTBOX","SimpleLightbox","inputValue","searchPhotos","loadNewPhotos","event","handleSearchEvents","images","handleNoImagesFound","renderImages","handleFinally","handleLoadNewPhotosEvents","endReached","errorMessage","icon","iziToast","galleryElement","galleryHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"+vBAEA,MAAMA,EAAM,qCACNC,EAAU,2BAET,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,GAAI,CACF,IAAIC,EAAW,MAAMC,EAAM,IACzB,GAAGL,CAAO,QAAQD,CAAG,MAAMG,CAAK,6EAA6EC,CAAI,EACvH,EAEI,GAAI,CAACC,EAAS,KAAK,KACjB,MAAM,IAAI,MAAM,6BAA6B,EAG/C,OAAOA,EAAS,IACjB,MAAe,CAEf,CACH,CCnBA,MAAeE,EAAA,gDCAAC,EAAA,kDCgJTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAkB,IAAIC,EAAe,aAAc,CACvD,aAAc,MACd,aAAc,IACd,iBAAkB,QACpB,CAAC,EAED,IAAIC,EAAa,KACbZ,EAAO,EAEXK,EAAK,iBAAiB,SAAUQ,CAAY,EAC5CL,EAAY,iBAAiB,QAASM,CAAa,EAEnD,eAAeD,EAAaE,EAAO,CACjCA,EAAM,eAAc,EACpBC,IAEA,GAAI,CAEF,MAAMC,GADO,MAAMnB,EAAUc,EAAY,CAAC,GACtB,KAEhBK,EAAO,SAAW,EACpBC,KAEAC,EAAaF,EAAQV,CAAO,EAC5BG,EAAgB,QAAO,EAE1B,MAAe,CACdQ,GACJ,QAAY,CACRE,GACD,CACH,CAEA,eAAeN,GAAgB,CAC7BO,IAEA,GAAI,CAEF,MAAMJ,GADO,MAAMnB,EAAUc,EAAYZ,CAAI,GACzB,KAEhBiB,EAAO,SAAW,EACpBC,EAAoB,EAAI,GAExBC,EAAaF,EAAQV,CAAO,EAC5BG,EAAgB,QAAO,EAE1B,MAAe,CACdQ,GACJ,QAAY,CACRE,GACD,CACH,CAEA,SAASJ,GAAqB,CAC5BT,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,OAAO,WAAW,EAEnCG,EAAaN,EAAM,KACrB,CAEA,SAASY,EAAoBI,EAAa,GAAO,CAC/Cf,EAAQ,UAAY,GAEpB,MAAMgB,EAAeD,EAAa,4DAChC,2EAEIE,EAAOF,EAAalB,EAAcD,EAExCsB,EAAS,MAAM,CACb,QAASF,EACT,SAAU,WACV,QAAS,IACT,YAAa,GACb,MAAO,GACP,QAASC,EACT,aAAcF,EAAa,OAAS,UACpC,UAAWA,EAAa,OAAS,UACjC,gBAAiBA,EAAa,UAAY,SAC9C,CAAG,CACH,CAEA,SAASD,GAA4B,CACnCb,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAO,UAAU,OAAO,WAAW,EAEnCT,GACF,CAEA,SAASoB,GAAgB,CACvBX,EAAO,UAAU,IAAI,WAAW,EAChCD,EAAY,UAAU,OAAO,WAAW,EACxCH,EAAK,MAAK,CACZ,CAEA,SAASc,EAAaF,EAAQS,EAAgB,CAC5C,MAAMC,EAAcV,EACjB,IACC,CAAC,CACC,aAAAW,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,0CACkCL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,kEAINC,CAAK;AAAA,kEACLC,CAAK;AAAA,qEACFC,CAAQ;AAAA,sEACPC,CAAS;AAAA;AAAA,cAG1E,EACA,KAAK,EAAE,EAEVR,EAAe,mBAAmB,YAAaC,CAAW,CAC5D"}